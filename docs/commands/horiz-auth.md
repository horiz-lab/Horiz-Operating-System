# horiz-auth (認証ライブラリ)

`horiz-auth` は、HorizOS 環境下においてシステムへのログインパスワード認証を安全に処理するために設計された、独自のセキュリティ認証ライブラリ (Rustクレート) である。通常はバイナリとして直接実行されず、`horiz-init` のログインプロセスなどに組み込まれて動作する。

## 主要なセキュリティ機能と実装

### 1. タイミング攻撃への耐性

- パスワード検証（比較処理）において、XORベースの**定数時間比較 (Constant-time Comparison)** を徹底している。
- 文字列の先頭から1文字ずつ比較して不一致時点で即座にフォールスを返す標準の手法とは異なり、全バイトを必ず評価して全体の差異を蓄積することで、攻撃者が比較処理の実行時間差からパスワードの部分一致を推測するタイミング攻撃を完全に無効化する。

### 2. 強固なハッシュ化とストレッチング

- 独自のゼロ依存 **SHA-256** 実装を用いてパスワードのハッシュ化を行う。
- 10,000回のストレッチング (反復ハッシュ計算) を実施することで、ブルートフォース攻撃やディクショナリアタック、レインボーテーブル攻撃に対する計算コストを意図的に引き上げ、パスワード突破の難易度を劇的に高める。

### 3. セキュアな定数ソルト生成

- 乱数源として `/dev/urandom` を利用し、予測不可能（CSPRNGベース）な16バイトのランダムソルトを動的に生成する。

### 組み込み例 (`horiz-init`)

```rust
// horiz-auth によるパスワード検証呼び出し
match horiz_auth::verify_login(&username, &password) {
    Ok(true) => { /* 認証成功 */ },
    Ok(false) => { /* 認証失敗 */ },
    Err(e) => { /* パスワードファイル読み込み等のシステムエラー */ },
}
```
